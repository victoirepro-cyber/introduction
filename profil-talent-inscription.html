<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Inscription - Profil Talent</title>

<style>
  *{ box-sizing:border-box; }
  body{ margin:0; font-family: Arial, sans-serif; background:#ffffff; }

  .screen{
    min-height:100vh;
    display:flex;
    background: linear-gradient(to right, #ffffff 0%, #ffffff 30%, #a8c2da 100%);
  }

  .sidebar{
    width:220px;
    padding:0;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    background:#fff;
  }

  .logo img{ max-width:220px; height:auto; display:block; }

  .menu{
    background-color:#fff;
    flex:1;
    padding:20px;
    border: 1.5px solid #2f5fa7;
    border-radius: 10px;
  }

  .menu a{
    display:block;
    margin:35px 0;
    text-decoration:none;
    color:black;
    font-style:italic;
  }
  .menu a:hover{color:red}
  .menu a.active{ font-size:22px; font-weight:bold; color:red; }

  .dropdown{position:relative;margin:20px 0;}
  .dropbtn{ display:block; text-decoration:none; color:black; font-style:italic; }
  .dropbtn:hover{color:red;}
  .dropdown-content{
    display:none; margin-top:8px; margin-left:12px;
    border-left:2px solid #eee; padding-left:12px;
  }
  .dropdown-content a{
    display:block; margin:10px 0; text-decoration:none;
    color:#333; font-style:normal; font-size:14px;
  }
  .dropdown-content a:hover{color:red;}
  .dropdown:hover .dropdown-content{display:block;}

  .content{ flex:1; padding:30px 22px; }

  .title{
    text-align:center;
    color:#b71c1c;
    font-size:34px;
    letter-spacing:1px;
    margin:18px 0 10px;
    font-weight:500;
  }

  .subtitle{
    text-align:center;
    margin:0 0 20px;
    font-size:16px;
    color:#111;
    font-weight:700;
  }

  .badge{
    display:inline-block;
    padding:6px 10px;
    border-radius:999px;
    border:1.5px solid #2f5fa7;
    font-size:13px;
    font-weight:700;
    background:#fff;
  }

  .form-area{ max-width:900px; margin:0 auto; padding-top:10px; }

  .section{
    background:#ffffff;
    border:1.5px solid #2f5fa7;
    border-radius:12px;
    padding:18px 16px;
    margin:16px 0;
  }

  .section h3{ margin:0 0 12px; font-size:20px; color:#2f5fa7; }

  .hint{ margin:0 0 12px; font-size:14px; line-height:1.35; color:#333; }

  .row{
    display:grid;
    grid-template-columns: 230px 1fr;
    gap:20px;
    align-items:center;
    margin:18px 0;
  }

  .row label{ font-size:18px; font-weight:700; color:#111; }

  .row input[type="text"],
  .row input[type="password"],
  .row input[type="email"]{
    height:45px;
    width:100%;
    border:2px solid #9e9e9e;
    background:#ffffff;
    padding:10px 12px;
    outline:none;
  }

  .actions{
    margin-top:14px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:12px;
  }

  .btn-primary{
    width:260px;
    height:46px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-size:18px;
    font-weight:800;
    color:#fff;
    background:#2f5fa7;
  }
  .btn-primary:hover{ filter:brightness(0.95); }

  .msg{
    margin-top:8px;
    text-align:center;
    font-size:16px;
    font-weight:800;
  }
  .msg.ok{ color:#1b5e20; }
  .msg.err{ color:#b71c1c; }

  .already{
    margin-top:10px;
    text-align:center;
    font-size:16px;
    font-weight:700;
  }
  .already a{ color:#1565c0; text-decoration:underline; }

  @media (max-width: 850px){
    .screen{ flex-direction:column; }
    .sidebar{ width:100%; }
    .row{ grid-template-columns:1fr; }
  }
</style>
</head>

<body>
  <div class="screen">

    <div class="sidebar">
      <div class="logo">
        <img src="images/LOGO I-JOM.jpg" alt="Logo I-JOM">
      </div>

      <div class="menu">
        <a href="index.html">ACCUEIL</a>
        <a href="apropos.html">A PROPOS DE NOUS</a>

        <div class="dropdown">
          <span class="dropbtn active">PROFIL TALENT ▾</span>
          <div class="dropdown-content">
            <a href="profil-talent-connexion.html">Connexion</a>
            <a href="profil-talent-compte.html">Mon Compte</a>
            <a href="profil-talent-inscription.html" class="active">Inscription</a>
          </div>
        </div>

        <div class="dropdown">
          <span class="dropbtn">RECRUTEUR ▾</span>
          <div class="dropdown-content">
            <a href="recruteur-connexion.html">Connexion</a>
            <a href="recruteur-moncompte.html">Mon Compte</a>
            <a href="recruteur-inscription.html">Inscription</a>
          </div>
        </div>

        <a href="partenaires.html">NOS PARTENAIRES</a>
        <a href="contact.html">NOUS CONTACTER</a>
      </div>
    </div>

    <main class="content">
      <div class="title">INSCRIPTION PROFIL TALENT</div>
      <p class="subtitle">
        <span class="badge">Création de compte</span>
      </p>

      <div class="form-area">
        <form id="signupForm" novalidate>
          <div class="section">
            <h3>Créer votre compte</h3>
            <p class="hint">
              Remplissez ces informations pour créer votre compte, puis vous serez redirigé(e) vers <b>Mon Compte</b>.
            </p>

            <div class="row">
              <label for="email">Adresse mail</label>
              <input id="email" type="email" required placeholder="ex: nom.prenom@email.com">
            </div>

            <div class="row">
              <label for="login">Login</label>
              <input id="login" type="text" required placeholder="Choisissez un login">
            </div>

            <div class="row">
              <label for="mdp">Mot de passe</label>
              <input id="mdp" type="password" required placeholder="Choisissez un mot de passe">
            </div>

            <div class="actions">
              <button type="submit" class="btn-primary">Créer mon compte</button>
              <div class="msg" id="msg" aria-live="polite"></div>
            </div>

            <div class="already">
              Déjà inscrit(e) ? <a href="profil-talent-connexion.html">Se connecter</a>
            </div>
          </div>
        </form>
      </div>
    </main>

  </div>

<script>
  const KEY_ACCOUNT  = "talentAccount";
  const KEY_SESSION  = "talentSession";

  const form = document.getElementById("signupForm");
  const emailInput = document.getElementById("email");
  const loginInput = document.getElementById("login");
  const passInput  = document.getElementById("mdp");
  const msg = document.getElementById("msg");

  function setMessage(text, type){
    msg.textContent = text;
    msg.className = "msg " + (type || "");
  }

  function isValidEmail(v){
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
  }

  function readJSON(key){
    const raw = localStorage.getItem(key);
    if(!raw) return null;
    try { return JSON.parse(raw); } catch(e){ return null; }
  }

  function writeJSON(key, value){
    localStorage.setItem(key, JSON.stringify(value));
  }

  form.addEventListener("submit", function(e){
    e.preventDefault();

    const email = (emailInput.value || "").trim();
    const login = (loginInput.value || "").trim();
    const password = passInput.value || "";

    if(!email || !login || !password){
      setMessage("Veuillez remplir l’adresse mail, le login et le mot de passe.", "err");
      return;
    }

    if(!isValidEmail(email)){
      setMessage("Adresse mail invalide. Exemple : nom.prenom@email.com", "err");
      return;
    }

    const existing = readJSON(KEY_ACCOUNT);
    if(existing){
      setMessage("Un compte existe déjà sur cet appareil. Veuillez vous connecter.", "err");
      return;
    }

    const newAccount = {
      email, login, password,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    };

    writeJSON(KEY_ACCOUNT, newAccount);
    writeJSON(KEY_SESSION, { login, connected: true, connectedAt: new Date().toISOString() });

    setMessage("Compte créé avec succès ✅ Redirection vers Mon Compte…", "ok");
    window.location.href = "profil-talent-compte.html";
  });
</script>

</body>
</html>
