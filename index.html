<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Auto</title>
  <style>
    html,body{height:100%;margin:0}
    .stage{position:fixed;inset:0;overflow:hidden;background:#000}
    video{position:absolute;inset:0;width:80%;height:80%;object-fit:cover;transform:scale(1);transition:transform 900ms ease}
    .shade{position:fixed;inset:0;background:rgba(0,0,0,.25)}
    .msg{
      position:fixed;left:16px;bottom:16px;
      color:#fff;font:14px/1.4 Arial, sans-serif;
      background:rgba(0,0,0,.35);padding:10px 12px;border-radius:12px
    }
  </style>
</head>
<body>
  <div class="stage">
    <video id="bg" autoplay muted loop playsinline>
      <source src="video/I-jom intro.mp4" type="video/mp4">
    </video>
  </div>
  <div class="shade"></div>
  <div class="msg" id="msg">Détection du pays…</div>

  <script>
    const bg  = document.getElementById("bg");
    const msg = document.getElementById("msg");

    // ⚙️ Réglages: "zoom fake" par pays (tu peux compléter)
    // translateX/Y en % de l’écran, scale = zoom
    const ZOOM = {
      "Côte d'Ivoire": { scale: 1.55, tx: 10,  ty: 6 },
      "France":        { scale: 1.65, tx: -8, ty: 10 },
      "Senegal":       { scale: 1.55, tx: 9,  ty: 7 },
      "Nigeria":       { scale: 1.55, tx: 18, ty: 8 }
    };

    // Pages d’accueil (à adapter)
    const HOME = {
      talent: "accueil.html",          // ou accueil-talent.html
      partenaire: "accueil.html"       // ou accueil-partenaire.html
    };

    function applyFakeZoom(country){
      const z = ZOOM[country];
      if(!z) return;
      // Astuce: translate avant scale pour l’effet caméra
      bg.style.transform = `translate(${z.tx}%, ${z.ty}%) scale(${z.scale})`;
    }

    async function detectCountryFast(){
      // IP-based: rapide et simple (≈ 1-2s souvent)
      const r = await fetch("https://ipapi.co/json/");
      const j = await r.json();
      return j.country_name || "";
    }

    (async () => {
      try{
        const country = await detectCountryFast(); // :contentReference[oaicite:2]{index=2}
        msg.textContent = country ? `Pays détecté : ${country}` : "Pays non détecté";
        if(country) localStorage.setItem("ijom_country", country);

        // attente totale ~3 secondes avant action
        setTimeout(() => {
          if(country) applyFakeZoom(country);
          msg.textContent = "Redirection…";
          setTimeout(() => {
            window.location.href = HOME.talent; // tu peux choisir talent/partenaire plus tard
          }, 900);
        }, 3000);

      }catch(e){
        msg.textContent = "Détection impossible — redirection…";
        setTimeout(() => window.location.href = "accueil.html", 3000);
      }
    })();
  </script>
</body>
</html>
